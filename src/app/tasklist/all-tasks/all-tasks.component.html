<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta
      name="viewport"
      content="width=device-width, initial-scale=1, shrink-to-fit=no"
    />
    <link
      href="https://cdn.jsdelivr.net/npm/bootstrap@5.5.0/dist/css/bootstrap.min.css"
      rel="stylesheet"
    />
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.5.0/dist/js/bootstrap.min.js"></script>
  </head>
  <body>
    <div class="conta">
      <!-- button for add new task -->
      <a class="me-3" routerLink="/tasklist/task/add-task" id="task-add">
        <span class="new mt-1 me-1">new</span>
        <img class="add-logo" src="https://i.postimg.cc/zGYGbt27/add-task-button.png" alt="">
      </a>
      <!-- main content -->
      <h1 class="text-center pt-1 mb-5">My Tasks</h1>
      <div class="container">
        <div class="sort row">
          <!-- filtering data -->
          <div
            class="col-lg-6 btn-group mb-5 ms-5"
            role="group"
            aria-label="Basic example"
          >
            <button (click)="filterData('All')" type="button" class="btn">All</button>
            <button (click)="filterData('Pending')" type="button" class="btn">Pending</button>
            <button (click)="filterData('Completed')" type="button" class="btn">Completed</button>
          </div>
          <!-- search bar -->
          <div class="col-lg-6 mb-3">
            <form class="form-inline me-5">
              <input
                class="form-control mr-sm-2 me-2"
                type="search"
                id="search"
                [(ngModel)]="searchString"
                name="searchString"
                placeholder="Search task"
                aria-label="Search"
              />
              <button (click)="sortData()" class="btn dropdown-toggle" id="sortDropdown" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false" class="btn btn-outline-success my-2 my-sm-0" type="submit">
                <i class="fa-solid fa-filter"></i>
                <span class="tooltip-text mt-4">sort by title</span>
            </button>
                          
            </form>
          </div>
        </div>
<!-- Displaying transformed data using pipes -->
<div *ngFor="let i of allTasks | filter: selectedStatus | search: searchString:'title' | sort:  ['title']" class="todo-list">  <div class="todo-list-item">
    <div class="task-details">
      <h3>{{i.title}}</h3>
    </div>
    <div id="task-body">
      <p>{{i.discription}}</p>
      <div class="todo-btns">
        <div class="dropdown">
          <!--  status -->
          <select [(ngModel)]="i.status" (change)="changeStatus(i)">
            <option  value="Pending">Pending</option>
            <option value="Completed">Completed</option>
          </select>
        </div>
        <!-- single view navigation -->
        <a routerLink="/tasklist/task/single-view/{{i.id}}">
          <img class="logo" src="https://i.postimg.cc/9FGJtsMn/view-button.png" alt="" />
        </a>
      </div>
    </div>
  </div>
</div>
        
      </div>
    </div>

    <script src="https://cdn.jsdelivr.net/npm/@popperjs/core@2.5.3/dist/umd/popper.min.js"></script>
    <script src="https://stackpath.bootstrapcdn.com/bootstrap/5.5.0/js/bootstrap.min.js"></script>
  </body>
</html>
